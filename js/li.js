var dataKinds = 0;
var slideNav = [
	{
		"abs":"海量好书，享受精品阅读时光漂亮的中文排版，千万读者选择！",
		"linkText":"前往多看阅读",
		"img_url":"img/more-duokan.jpg",
		"url":"####"
	},{
		"abs":"众多个性主题、百变锁屏与自由桌面让你的手机与众不同！",
		"linkText":"前往MIUI主题市场",
		"img_url":"img/more-miui.jpg",
		"url":"####"
	},{
		"abs":"海量好书，享受精品阅读时光漂亮的中文排版，千万读者选择！",
		"linkText":"前往多看阅读",
		"img_url":"img/more-duokan.jpg",
		"url":"####"
	},{
		"abs":"众多个性主题、百变锁屏与自由桌面让你的手机与众不同！",
		"linkText":"前往MIUI主题市场",
		"img_url":"img/more-miui.jpg",
		"url":"####"
	}
];
var leftNav = [
	{
		"content":"电视盒子",
		"children":[
			{
				"img_url":"img/018080.png",
				"name":"小米电视3s 48英寸",
				"url":"#"
			},{
				"img_url":"img/553s80.png",
				"name":"小米电视3s 68英寸",
				"url":"#"
			},{
				"img_url":"img/tv3-55.jpg",
				"name":"小米电视3s 88英寸",
				"url":"#"
			},{
				"img_url":"img/553s80.png",
				"name":"小米电视3s 108英寸",
				"url":"#"
			},{
				"img_url":"img/tv3-55.jpg",
				"name":"小米电视3s 128英寸",
				"url":"#"
			}
		]
	},{
		"content":"",
		"children":[
			{
				"img_url":"img/xmNOTE2-80.jpg",
				"name":"小米Note4",
				"btn_link":"###",
				"url":"#"
			},{
				"img_url":"img/xmNOTE2-80.jpg",
				"name":"小米Note5",
				"btn_link":"###",
				"url":"#"
			},{
				"img_url":"img/xmNOTE2-80.jpg",
				"name":"小米Note6",
				"btn_link":"###",
				"url":"#"
			},{
				"img_url":"img/xmNOTE2-80.jpg",
				"name":"小米Note7",
				"url":"#"
			},{
				"img_url":"img/xmNOTE2-80.jpg",
				"name":"小米Note8",
				"url":"#"
			}
		]
	}
]
var slideData = [
	{
		"color":"#ffac13",
		"content":"图书",
		"children":[
			{
				"name":"哈利·波特与被诅咒的孩子",
				"abs":"哈利·波特”第八个故事中文版震撼来袭！特别彩排版剧本！ ",
				"price":"29.37元",
				"img_url":"img/s1.png",
				"img_alt":"哈利波特",
				"url":"###"
			},{
				"name":"好吗好的",
				"abs":"畅销作家大冰2016年新书！讲给你听，好吗好的！",
				"price":"17.99元",
				"img_url":"img/s2.png",
				"img_alt":"好吗好的",
				"url":"###"
			}
		]
	},{
		"color":"#995959",//83c44e
		"content":"MIUI主题",
		"children":[
			{
				"name":"bilibili拜年祭",
				"abs":"bilibili拜年祭",
				"price":"免费",
				"img_url":"img/m1.jpg",
				"img_alt":"bilibili拜年祭",
				"url":"###"
			},{
				"name":"阴阳师",
				"abs":"网易大热手游《阴阳师》官方定制主题，还原唯美奇幻之旅",
				"price":"免费",
				"img_url":"img/m2.jpg",
				"img_alt":"阴阳师",
				"url":"###"
			},{
				"name":"你的名字。",
				"abs":"前前前世就追寻着你的身影。——官方定制主题",
				"price":"免费",
				"img_url":"img/m3.jpg",
				"img_alt":"你的名字",
				"url":"###"
			}
		]
	},{
		"color":"#ffac13",
		"content":"图书",
		"children":[
			{
				"name":"哈利·波特与被诅咒的孩子",
				"abs":"哈利·波特”第八个故事中文版震撼来袭！特别彩排版剧本！ ",
				"price":"29.37元",
				"img_url":"img/s1.png",
				"img_alt":"哈利波特",
				"url":"###"
			},{
				"name":"好吗好的",
				"abs":"畅销作家大冰2016年新书！讲给你听，好吗好的！",
				"price":"17.99元",
				"img_url":"img/s2.png",
				"img_alt":"好吗好的",
				"url":"###"
			}
		]
	},{
		"color":"#995959",//83c44e
		"content":"MIUI主题",
		"children":[
			{
				"name":"bilibili拜年祭",
				"abs":"bilibili拜年祭",
				"price":"免费",
				"img_url":"img/m1.jpg",
				"img_alt":"bilibili拜年祭",
				"url":"###"
			},{
				"name":"阴阳师",
				"abs":"网易大热手游《阴阳师》官方定制主题，还原唯美奇幻之旅",
				"price":"免费",
				"img_url":"img/m2.jpg",
				"img_alt":"阴阳师",
				"url":"###"
			},{
				"name":"你的名字。",
				"abs":"前前前世就追寻着你的身影。——官方定制主题",
				"price":"免费",
				"img_url":"img/m3.jpg",
				"img_alt":"你的名字",
				"url":"###"
			}
		]
	}
//	,{
//		"color":"#995959";
//		"content":"",
//		"children":[
//			{
//				"name":"",
//				"abs":"",
//				"price":"",
//				"img_url":"",
//				"img_alt":""
//			},{
//				"name":"",
//				"abs":"",
//				"price":"",
//				"img_url":"",
//				"img_alt":""
//			},{
//				"name":"",
//				"abs":"",
//				"price":"",
//				"img_url":"",
//				"img_alt":""
//			}
//		]
//	},{
//		"content":"",
//		"children":[
//			{
//				"name":"",
//				"abs":"",
//				"price":"",
//				"img_url":"",
//				"img_alt":""
//			},{
//				"name":"",
//				"abs":"",
//				"price":"",
//				"img_url":"",
//				"img_alt":""
//			},{
//				"name":"",
//				"abs":"",
//				"price":"",
//				"img_url":"",
//				"img_alt":""
//			}
//		]
//	}
]
var photoBoxData = [
	{
		"img_url":"img/8e73ef88-33ba-42a2-a08c-6ef86c2cd9f2.jpg",
		"img_alt":"图片1",
		"url":"###"
	},{
		"img_url":"img/xmad_14872999911913_GFgXL.jpg",
		"img_alt":"图片2",
		"url":"###"
	},{
		"img_url":"img/xmad_14873018230451_owtCT.jpg",
		"img_alt":"图片3",
		"url":"##"
	},{
		"img_url":"img/xmad_14873197561623_CkylP.jpg",
		"img_alt":"图片4",
		"url":"##"
	},{
		"img_url":"img/xmad_14873018230451_owtCT.jpg",
		"img_alt":"图片3",
		"url":"##"
	},{
		"img_url":"img/xmad_14873197561623_CkylP.jpg",
		"img_alt":"图片4",
		"url":"##"
	}
]
var photoBox = function(data,el){
	
	var createBox = function(el){
		var div = document.createElement("div");
		div.className = "photoBox";
		
		div.appendChild(createPhotoBoxList());
		var btn_left = document.createElement("a");
		btn_left.href = "javascript:void(0);";
		btn_left.id = "left";
		btn_left.className = "btn btn_left";
		div.appendChild(btn_left);
		var btn_right = document.createElement("a");
		btn_right.href = "javascript:void(0);";
		btn_right.id = "right";
		btn_right.className = "btn btn_right";
		div.appendChild(btn_right);
		div.appendChild(createPositionPoint());
		el.appendChild(div);
		
		return;
	}
	var createPositionPoint = function(){
		var ul = document.createElement("ul");
		ul.className = "positionPoint_1";
		for(var i=0;i<data.length;i++){
			var li = document.createElement("li");
			li.setAttribute("data-point",i);
			if(i==0){
				li.className = "active";
			}
			ul.appendChild(li);
		}
		
		return ul;
	}
	
	var createPhotoBoxList = function(){
		var ul = document.createElement("ul");
		ul.className = "photoBoxList";
		
		for(var i=0;i<data.length;i++){
			var li = document.createElement("li");
			if(i==0){
				li.className = "show";
			}else{
				li.className = "hidden";
			}
			li.setAttribute("data-photo",i);
			var a = document.createElement("a");
			a.href = data[i].url;
			var img = document.createElement("img");
			img.src = data[i].img_url;
			img.alt = data[i].img_alt;
			a.appendChild(img);
			li.appendChild(a);
			
			ul.appendChild(li);
		}
		return ul;
	}
	
	
	
	createBox(el);
	
	
}
var leftNav = function(){
	
}

var goods_slide = function(data,fa_el,dataNav){
	var mainColor = null;
	var createGoodsSlide = function(){
		for(var i=0;i<data.length;i++){
			var li = document.createElement("li");
			li.className = "goods_slide";
			mainColor = data[i].color;
			li.setAttribute("data-color",mainColor);
			li.setAttribute("style","border-color:"+mainColor);
			if(i==3){
				li.setAttribute("style","margin-right: 0px;")
			}
			
			li.appendChild(createKindName(i,mainColor));
			li.appendChild(createContentBox(i));
			createBtn(li);
			li.appendChild(createPoint(i));
			
			fa_el.appendChild(li);
		}
	}
	
	var createPoint = function(i){
		var ul = document.createElement("ul");
		ul.className = "positionPoint";
		for(var j=0;j<=data[i].children.length;j++){
			var li = document.createElement("li");
			if(j == 0){
				li.className = "point active";
			}else{
				li.className = "point";
			}
			li.setAttribute("data-point",j);
			ul.appendChild(li);
		}
		return ul;
	}
	var createBtn = function(el){
		var a = document.createElement("a");
		a.className = "btn btn_left";
		var img = document.createElement("img");
		img.src = "img/leftIcon.png";
		a.appendChild(img);
		a.href = "###";
		el.appendChild(a);
		var a = document.createElement("a");
		var img = document.createElement("img");
		img.src = "img/leftIcon.png";
		a.className = "btn btn_right";
		a.href = "###";
		img.style = "transform: rotate(180deg);";
		a.appendChild(img);
		el.appendChild(a);
	}
	
	var createKindName = function(i,mainColor){
		var p = document.createElement("p");
		p.className = "kindName";
		p.innerHTML = data[i].content;
		p.style.color = mainColor;
		
		return p;
	}
	var createContentBox = function(i){
		var ul = document.createElement("ul");
		ul.className = "contentBox";
		for(var j=0;j<data[i].children.length;j++){
			var li = document.createElement("li");
			li.className = "contentLi";
			li.setAttribute("data-num",j);
			fillLi(i,j,li);
			
			ul.appendChild(li);
		}
		var li = document.createElement("li");
		li.className = "contentLi";
		li.setAttribute("data-num",j);
		fillLiNav(i,li);
		
		ul.appendChild(li);
		
		return ul;
	}
	var fillLiNav = function(i,li){
		var data_pre = dataNav[i];
		var a = document.createElement("a");
		a.className = "abs";
		a.innerHTML = data_pre.abs;
		li.appendChild(a);
		var a = document.createElement("a");
		a.className = "link";
		a.href = data_pre.url;
		a.setAttribute("style","border-color:"+mainColor);
		var p = document.createElement("p");
		p.innerHTML = data_pre.linkText;
		p.setAttribute("style","color:"+mainColor);
		a.appendChild(p);
		li.appendChild(a);
		var a = document.createElement("a");
		a.className = "a_img";
		var img = document.createElement("img");
		img.src = data_pre.img_url;
		a.appendChild(img);
		li.appendChild(a);
		
		return li;
	}
	var fillLi = function(i,j,li){
		var dataThis = data[i].children[j];
		var a = document.createElement("a");
		a.className = "name";
		a.href = dataThis.url;
		a.innerHTML = dataThis.name;
		li.appendChild(a);
		var a = document.createElement("a");
		a.className = "abs";
		a.href = dataThis.url;
		a.innerHTML = dataThis.abs;
		li.appendChild(a);
		var p = document.createElement("p");
		p.innerHTML = dataThis.price;
		li.appendChild(p);
		var a = document.createElement("a");
		a.className = "a_img";
		a.href = dataThis.url;
		var img = document.createElement("img");
		img.src = dataThis.img_url;
		img.alt = dataThis.img_alt;
		a.appendChild(img);
		li.appendChild(a);
		
	}
	createGoodsSlide();
}

$(document).ready(function(){
	var temp = 0;
	var init = function(){
		var el = document.getElementById("goodsBox");
		var goodsSlide = new goods_slide(slideData,el,slideNav);
	}
	init();
	var initPhoto = function(){
		var el = document.getElementById("photoBox");
		var photoBox1 = new photoBox(photoBoxData,el);
	}
	initPhoto();
	$(".photoBox").children("#left").click(function(){
		var pre = $(this).siblings(".photoBoxList").children(".show");
		if($(pre).attr("data-photo")>0){
			$(pre).attr("class","hidden");
			$(pre).prev().attr("class","show");
			var pre_point = $(this).siblings(".positionPoint_1").children(".active");
			$(pre_point).removeClass("active");
			$(pre_point).prev().addClass("active");
		}
		
	});
	$(".photoBox").children("#right").click(function(){
		var pre = $(this).siblings(".photoBoxList").children(".show");
		if($(pre).attr("data-photo")<photoBoxData.length-1){
			$(pre).attr("class","hidden");
			$(pre).next().attr("class","show");
			var pre_point = $(this).siblings(".positionPoint_1").children(".active");
			$(pre_point).removeClass("active");
			$(pre_point).next().addClass("active");
		}
	});
	$(".photoBox").children(".positionPoint_1").children().click(function(){
		$(this).siblings(".active").removeClass("active");
		$(this).addClass("active");
		var pointNum = $(this).attr("data-point");
//		console.log(pointNum);
		var this_photoBoxList = $(this).parent().siblings(".photoBoxList");
		$(this_photoBoxList).children(".show").attr("class","hidden");
		$(this_photoBoxList).children().eq(pointNum).attr("class","show");
	});
	$(".goodsLeft").children().children().mouseenter(function(){
		$(this).parent().css("background-color","#ff6700");
	});
	$(".goodsLeft").children().children().mouseleave(function(){
		$(this).parent().css("background-color","none");
	});
	$(".goodsLeft").children().children().mouseenter(function(){
		$(this).parent().parent().next().css("display","block");
	
	});
	$(".goodsNav").mouseleave(function(){
		$(".goodsRight").css("display","none");
	});
	
	$("a.btn_left").click(function(){
		if(temp<-100){
			temp += 296;
			var active = $(this).siblings(".positionPoint").children(".active");
			$(active).removeClass("active");
			$(active).prev().addClass("active");
		
			$(this).siblings(".contentBox").css("left",temp);
		}
	});
	$("a.btn_right").click(function(){
		var num = $(this).siblings(".contentBox").children(".contentLi").length;
		//验证是否超出
		if(temp!=-296*(num-1)){
			temp -= 296;
			var active = $(this).siblings(".positionPoint").children(".active");
			$(active).removeClass("active");
			$(active).next().addClass("active");
		
			$(this).siblings(".contentBox").css("left",temp);
		}
	});
	//点击圆点切换
	$(".point").click(function(){
		var point = $(this).attr("data-point");
		$(this).siblings(".active").removeClass("active");
		$(this).addClass("active");
		temp = point*-296;
		$(this).parent().siblings(".contentBox").css("left",temp);
	});
	
	
	//初始化显示
		$(".good_cell").hide();
		$(".reNem").show();
	$(".kinds").mouseenter(function(){
		dataKinds = $(this).attr("data-kinds");
		if(dataKinds==0){
			$(".good_cell").hide();
			$(".reNem").show();
		}
		if(dataKinds==1){
			$(".good_cell").hide();
			$(".erJi").show();
		}
		if(dataKinds==2){
			$(".good_cell").hide();
			$(".dianYuan").show();
		}
	});
	$(".link").mouseenter(function(){
		var mainColor = $(this).parent().parent().parent().attr("data-color");
		$(this).css("background-color",mainColor);
		$(this).children().css("color","#fff");
	});
	$(".link").mouseleave(function(){
		var mainColor = $(this).parent().parent().parent().attr("data-color");
		$(this).css("background-color","#fff");
		$(this).children().css("color",mainColor);
	});
	$(".goods_slide").mouseenter(function(){
		$(this).find(".btn").addClass("btn_active");
		temp = $(this).children(".contentBox").position().left;
	});
	$(".goods_slide").mouseleave(function(){
		$(this).find(".btn").removeClass("btn_active");
	});
//	$(".btn_left").click(function(){
//		$(this).next().next().css("left","0px");
//		$(this).css("color","rgb(224,224,224)");
//		$(this).next().css("color","rgb(176,176,176)");
//	});
//
//	$(".btn_rigth").click(function(){
//		$(this).next().css("left","-1226px");
//		$(this).css("color","rgb(224,224,224)");
//		$(this).prev().css("color","rgb(176,176,176)");
//	});
	$("#btn_rigth_1").click(function(){
		$("#goodList_1").css("left","-1226px");
		$("#btn_rigth_1").css("color","rgb(224,224,224)");
		$("#btn_left_1").css("color","rgb(176,176,176)");
	});
	$("#btn_left_1").click(function(){
		$("#goodList_1").css("left","0px");
		$("#btn_left_1").css("color","rgb(224,224,224)");
		$("#btn_rigth_1").css("color","rgb(176,176,176)");
	});
		$("#btn_rigth_2").click(function(){
		$("#goodList_2").css("left","-1226px");
		$("#btn_rigth_2").css("color","rgb(224,224,224)");
		$("#btn_left_2").css("color","rgb(176,176,176)");
	});
	$("#btn_left_2").click(function(){
		$("#goodList_2").css("left","0px");
		$("#btn_left_2").css("color","rgb(224,224,224)");
		$("#btn_rigth_2").css("color","rgb(176,176,176)");
	});
	
	for(var i=1;i<=10;i++){
		var color = $("#goodDiv"+i).attr("data-color");
		$("#goodDiv"+i).css("border-top-color",color)
	}
});
